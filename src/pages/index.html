<!DOCTYPE HTML>
<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>蛋鸡管家大数据</title>
		<link rel="stylesheet" href="./css/main.css" />
	</head>

	<body>
		<div class="header" id="demo">
			<div class="canvaszz"></div>
			<canvas id="canvas"></canvas>
		</div>

		<div class="container">
			<!--数字时钟-->
			<div class="clock" id="clock"></div>
			<!--主体数据展示-->
			<div class="row">
				<!--中国地图展示-->
				<div class="main-container">
					<div id="chainCharts" style="width:100%;height:100vh;padding-top: 20px;"></div>
				</div>

				<!--左边图表及数据-->
				<div class="left-container col-2">

					<div class="" style="height: 23vh;">
						<div class="title">
							用户数据展示
						</div>
						<div class="box-list">
							<div class="box" style="margin-right: 1vw;">
								<div>下载量</div>
								<div class="box-text">
									<span class="box-num" id="download-num"></span>
									<span class="unit">人</span>
								</div>
							</div>
							<div class="box" style="margin-right: 1vw;">
								<div>注册量</div>
								<div class="box-text">
									<span class="box-num" id="registe-num"></span>
									<span class="unit">人</span>
								</div>
							</div>
							<!--<div class="box" id="product" onclick="productClick()">
								<div>生产效益</div>
								<div class="box-text">
									<span class="box-num" id="brood-num"></span>
									<span class="unit">次</span>
								</div>
							</div>
							<a href="https://data.danjiguanjia.com/#/modaluser/onlinecheck" class="box" style="display: inline-block;height: 100%;width: 100%;margin-left: 20px;">
								<div style="text-decoration: none;"><span style="text-decoration: none;color:#fff">云健康</span></div>
								<div class="box-text">
									<span class="box-num" id="health-num" style="text-decoration: none;"></span>
									<span class="unit" style="text-decoration: none;">次</span>
								</div>
							</a>-->
						</div>
						<div class="box-list">
							<!--<div class="box" style="margin-right: 1vw;">
								<div>下载量</div>
								<div class="box-text">
									<span class="box-num" id="download-num"></span>
									<span class="unit">人</span>
								</div>
							</div>
							<div class="box" style="margin-right: 1vw;">
								<div>注册量</div>
								<div class="box-text">
									<span class="box-num" id="registe-num"></span>
									<span class="unit">人</span>
								</div>
							</div>-->
							<div class="box" id="product" onclick="productClick()" style="margin-right: 1vw;">
								<div>生产效益</div>
								<div class="box-text">
									<span class="box-num" id="brood-num"></span>
									<span class="unit">次</span>
								</div>
							</div>
							<!--<a href="https://data.danjiguanjia.com/#/modaluser/onlinecheck" class="box" style="display: inline-block;height: 100%;width: 100%;">
								<div style="text-decoration: none;"><span style="text-decoration: none;color:#fff">云健康</span></div>
								<div class="box-text">
									<span class="box-num" id="health-num" style="text-decoration: none;"></span>
									<span class="unit" style="text-decoration: none;">次</span>
								</div>
							</a>-->
							<div class="box" id="product" onclick="gojiankang()" style="margin-right: 1vw;">
								<div>云健康</div>
								<div class="box-text">
									<span class="box-num" id="health-num"></span>
									<span class="unit">次</span>
								</div>
							</div>
						</div>
					</div>

					<div class="" style="height: 30vh;margin-top:8vh;">
						<div class="title">
							竞品市场占比
						</div>
						<div id="shopProportion" style="width: 100%;height: 20vh;"></div>
					</div>

					<div class="">
						<div class="title">
							今日资讯阅读趋势
						</div>
						<div id="line" style="width: 100%;height: 30vh;"></div>
					</div>

				</div>

				<!--中间数据展示-->
				<div class="middle-container">
					<div class="middle-top">
						<div class="top-show">
							<div class="title">
								资讯阅读量
							</div>
							<div>
								<span id="Newviews" class="text-show"></span>
								<span class="unit">次</span>
							</div>
						</div>

						<div class="top-show">
							<div class="title">
								蛋鸡覆盖量
							</div>
							<div>
								<span id="Coverage" class="text-show"></span>
								<span class="unit">羽</span>
							</div>
						</div>
					</div>
					<!--底部通知文字-->
					<!--<div class="middle-bottom">
						<ul class="text-list">
							<li>用户信息：用户18882223333上线了 <span>12:12:56</span></li>
						</ul>
					</div>-->
				</div>

				<!--右边图表及数据-->
				<div class="right-container col-2">
					<div class="">
						<div class="title">
							活跃注册用户省份排行
						</div>
						<div id="bar" style="width: 100%;height: 25vh;"></div>
					</div>

					<div class="">
						<div class="title">
							应用市场下载量占比
						</div>
						<div id="downloadShop" style="width: 100%;height: 25vh;"></div>
					</div>

					<div class="">
						<div class="title">
							生产效益录入省份排行
						</div>
						<div id="bar2" style="width: 100%;height: 30vh;"></div>
					</div>
				</div>
			</div>
		</div>
		<!--弹出层-->
		<div id="pop" class="popsty animated" onclick="popClose()">
			<div style="width: 900px;height: 600px;margin: 0 auto;margin-top: 150px;position: relative;" class="animated show">
				<div onclick="popClose()" style="position: absolute;top: 0;right:-10px;z-index: 1001;width: 50px;height: 50px;cursor: pointer;"></div>
				<iframe id="pop_iframe" width="910" height="600" frameborder="no" border="0" scrolling="no"></iframe>
			</div>
		</div>
		<!--加载动画-->
		<div class="loading-container fadeOut" id="loading-container">
			<img src="https://cdn-service.datav.aliyun.com/datav-static/1.3.22_1/image/loading.gif" />
		</div>

		<script type="text/javascript" src="./js/star.js"></script>
		<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
		<script type="text/javascript" src="./js/echarts-all.js"></script>
		<link href="https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css" type="text/css" rel="stylesheet" />
		<script src="https://cdn.bootcss.com/countup.js/1.9.3/countUp.min.js"></script>
		<script src="https://cdn.bootcss.com/axios/0.17.1/axios.min.js"></script>
		<script src="https://cdn.bootcss.com/layer/3.1.0/mobile/layer.js"></script>
		<script type="text/javascript" src="./js/function.js"></script>
		<!--图表-->
		<script type="text/javascript" src="./js/map.js"></script>
		<script type="text/javascript" src="./js/charts.js"></script>
		<script>
			var capacity = 170000000;
			var _this = this;
			axios.get(http + 'getAllNumData').then(function(res) {
				var allData = res.data.data.data;
				countUp('registe-num', 0, allData.allRegistNum, 0, 1, 5, 30, 'getALlRegistNum', 'allRegistNum'); //注册量
				countUp('Coverage', 0, capacity + allData.capacity, 0, 3, 40, 3); //覆盖量
				countUp('Newviews', 0, allData.allVierNum, 0, 1); //文章阅读量			
//				countUp('Newviews', 0, allData.allVierNum, 0, 1, 20, 6, 'getALlViewNum', 'data'); //文章阅读量			
				countUp('download-num', 0, allData.allDownLoadNum, 0, 1, 8, 10); //下载量
				countUp('brood-num', 0, allData.allBroodNum, 0, 1, 20, 10, 'getALlRegistNum', 'data'); //生产效益

			});

			function getNewList() {
				axios.get('https://data.danjiguanjia.com/da_api/v1/getALlViewNum').then(function(res) {
//					document.getElementById('Newviews').innerHTML = res.data.data.data.allVierNum;
					var demo = new CountUp('Newviews', res.data.data.data.allVierNum, res.data.data.data.allVierNum, 0, 3);
					demo.start();
				})
			}
			setInterval('getNewList()',5000)

			axios.post('https://data.danjiguanjia.com/api/v1/getYjKCount').then(function(res) {
				countUp('health-num', 0, res.data.result.count, 0, 1); //云健康数据
			})

			function productClick() {
				$(".show").addClass('zoomInDown');
				document.getElementById('pop').style.display = 'block'
				$('#pop_iframe').attr("src", './pop.html');
				$('#pop').removeClass('zoomOutUp')
				$('#pop').css({
					'background-color': 'rgba(0,0,0,0.8)'
				})
			}

			function popClose() {
				$(".show").removeClass('zoomInDown')
				$('#pop').addClass('zoomOutUp')
				$('#pop').css({
					'background-color': 'rgba(0,0,0,0)'
				})
			}
			function gojiankang(){
				window.open('https://data.danjiguanjia.com/#/modaluser/onlinecheck');
			}
		</script>

		<style>
			body .layui-m-layer .layui-m-layer-msg {
				width: auto;
				max-width: 90%;
				margin: 0 auto;
				bottom: -43vh;
				background-color: rgba(0, 0, 0, 0);
				color: #59EBE8;
			}
			
			a {
				text-decoration: none;
			}
		</style>
	</body>

</html>